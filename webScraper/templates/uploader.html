{% extends 'base.html' %}

{% block title %}Food Atlas - Upload{% endblock %}

{% block customcss %}
  {% load static %}
  <link rel="stylesheet" href="{% static 'css/loginStyles.css' %}">
{% endblock %}

{% block pagecontent %}
{% if user.is_authenticated %}
<form class="upload-form">
  {% csrf_token %}
  <div id="drop-area">
    <p>Upload CSV file via the dialog or drop file into dashed region</p>
    <input type="file" id="fileElem" accept=".xlsx" name="excel_file" onchange="handleFiles(this.files)">
    <label class="button" for="fileElem">Select CSV file</label>
    <label class="button" id = "upload-btn">Upload file</label>
    <progress id="progress-bar" value=0 max=100></progress>
    <div id="gallery"></div>
  </div>
</form>

<form id="myModal" class="modal" action="{% url 'uploader' %}" method="POST" enctype="multipart/form-data">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Warning: Submission incurs cost</h2>
      <span class="close">&times;</span>
    </div>
    <div class="modal-body">
      <p>$0.06 USD charged per business in CSV file</p>
      <label type = "Submit" class="button">Submit</label>
      <label class="button" id="cancel-btn">Cancel</label>
    </div>
  </div>
</form>
{% endif %}

<p></p>
{% for row in excel_data %}
  {% for cell in row %}
    {{ cell }}&nbsp;&nbsp;
  {% endfor %}
  <br>
{% endfor %}

{% load static %}
<script src="{% static 'js/uploader.js' %}"></script>
{% endblock %}