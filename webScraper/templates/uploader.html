{% extends 'base.html' %}

{% block title %}Food Atlas - Upload{% endblock %}

{% block customcss %}
  {% load static %}
  <link rel="stylesheet" href="{% static 'css/loginStyles.css' %}">
{% endblock %}

{% block pagecontent %}
{% if user.is_authenticated %}
<form class="upload-form" method="post" enctype="multipart/form-data">
  {% csrf_token %}
  <div id="drop-area">
    <p>Upload CSV file via the dialog or drop file into dashed region</p>
    <input type="file" id="fileElem" accept=".xlsx" name="excel_file" onchange="handleFiles(this.files)">
    <label for="lga">Local Government:</label>
    <select name="lga" id="lga">
      <option value="ARMADALE, CITY OF">ARMADALE, CITY OF</option>
      <option value="BASSENDEAN, TOWN OF">BASSENDEAN, TOWN OF</option>
      <option value="BAYSWATER, CITY OF">BAYSWATER, CITY OF</option>
      <option value="BELMONT, CITY OF">BELMONT, CITY OF</option>
      <option value="CANNING, CITY OF">CANNING, CITY OF</option>
      <option value="CAMBRIDGE, TOWN OF">CAMBRIDGE, TOWN OF</option>
      <option value="CLAREMONT, TOWN OF">CLAREMONT, TOWN OF</option>
      <option value="COCKBURN, CITY OF">COCKBURN, CITY OF</option>
      <option value="COTTESLOE, TOWN OF">COTTESLOE, TOWN OF</option>
      <option value="EAST FREMANTLE, TOWN OF">EAST FREMANTLE, TOWN OF</option>
      <option value="FREMANTLE, CITY OF">FREMANTLE, CITY OF</option>
      <option value="GOSNELLS, CITY OF">GOSNELLS, CITY OF</option>
      <option value="JOONDALUP, CITY OF">JOONDALUP, CITY OF</option>
      <option value="KALAMUNDA, CITY OF">KALAMUNDA, CITY OF</option>
      <option value="KWINANA, CITY OF">KWINANA, CITY OF</option>
      <option value="MELVILLE, CITY OF">MELVILLE, CITY OF</option>
      <option value="MOSMAN PARK, TOWN OF">MOSMAN PARK, TOWN OF</option>
      <option value="MUNDARING, SHIRE OF">MUNDARING, SHIRE OF</option>
      <option value="MURRAY, SHIRE OF">MURRAY, SHIRE OF</option>
      <option value="NEDLANDS, CITY OF">NEDLANDS, CITY OF</option>
      <option value="PERTH, CITY OF">PERTH, CITY OF</option>
      <option value="PEPPERMINT GROVE, SHIRE OF">PEPPERMINT GROVE, SHIRE OF</option>
      <option value="ROCKINGHAM, CITY OF">ROCKINGHAM, CITY OF</option>
      <option value="SERPENTINE-JARRAHDALE, SHIRE OF">SERPENTINE-JARRAHDALE, SHIRE OF</option>
      <option value="SOUTH PERTH, CITY OF">SOUTH PERTH, CITY OF</option>
      <option value="SUBIACO, CITY OF">SUBIACO, CITY OF</option>
      <option value="STIRLING, CITY OF">STIRLING, CITY OF</option>
      <option value="SWAN, CITY OF">SWAN, CITY OF</option>
      <option value="VICTORIA PARK, TOWN OF">VICTORIA PARK, TOWN OF</option>
      <option value="VINCENT, CITY OF">VINCENT, CITY OF</option>
      <option value="WANNEROO, CITY OF">WANNEROO, CITY OF</option>
    </select>
    <input type="number" id="collection-year" name="year" placeholder="Collection Year" min="2020" max="2099" step="1" value="2022">
    <br>
    <label class="button" for="fileElem">Select Excel file</label>
    <button class="button" type="submit" id="upload-btn">Upload file</button>
    <progress id="progress-bar" value=0 max=100></progress>
    <div id="gallery"></div>
    <br>
    {% if uploaded == 0 %}
        <div class="btn btn-success">Upload Succuessful</div>
    {% elif uploaded == 1 %}
        <div class="btn btn-danger">Upload Failed</div>
    {% endif %}
  </div>
</form>
{% endif %}




{% load static %}
<script src="{% static 'js/uploader.js' %}"></script>
{% endblock %}